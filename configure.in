dnl Process this file with autoconf to produce a configure script.
AC_INIT(newpag.c)

AC_ARG_WITH(afs, [  --with-afs=PREFIX       Specify prefix for AFS libraries],
	    [afs="$withval"], [afs=no])

AC_PROG_CC
AC_PROG_INSTALL

if test "$afs" != no; then
	AC_CHECK_FUNC(insque, :, AC_CHECK_LIB(compat, insque))
	AC_CHECK_FUNC(sigvec, :, AC_CHECK_LIB(ucb, sigvec))
	AC_CHECK_FUNC(gethostbyname, :, AC_CHECK_LIB(nsl, gethostbyname))
	AC_CHECK_FUNC(socket, :, AC_CHECK_LIB(socket, socket))

	if test "$afs" != yes; then
		CPPFLAGS="${CPPFLAGS} -I$afs/include"
		LDFLAGS="$LDFLAGS -L$afs/lib -L$afs/lib/afs"
	fi
	AC_CHECK_LIB(sys, pioctl, :, [AC_MSG_ERROR(AFS libraries not found)],
		     -lrx -llwp -lsys)
else
	AC_MSG_ERROR(This package requires AFS.)
fi

AC_OUTPUT(Makefile)
